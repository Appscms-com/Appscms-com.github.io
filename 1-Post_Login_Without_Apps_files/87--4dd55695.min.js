(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"0Xow":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("l7B3"),c=a("XI3S"),r=a("wZ2d"),o=a("CvfF"),l=a("uQn1"),s=a("Lawg");const i=(t,e)=>(a,i)=>{const u=i(),p=Object(r.q)(u);return new Promise((r,i)=>((t,e,a)=>{const c=`/apps/${a}/${t}/import`;return(new n.a).postFormData(c,{file:e},void 0)})(t,e,p).then(e=>{if(!e.ok)throw new Error;a(Object(o.b)()),Object(c.a)("Import Data File Uploaded",{type:t}),"templates"===t&&a(Object(s.e)()),"tags"===t&&a(Object(l.e)()),r()}).catch(()=>i()))}},"3AHW":function(t,e,a){"use strict";(function(t,n){a.d(e,"a",(function(){return l}));var c=a("Vebz"),r=a("ZB+l"),o=a("GTb2");const l=t.memo(({text:e,type:a,className:l})=>{const s=Object(r.p)(t.createElement(o.a,{type:a}));return t.createElement(c.Button,{content:e,icon:"upload",className:n("import-data__button",l),onClick:s})})}).call(this,a("q1tI"),a("TSYQ"))},"8H/j":function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return c}));var n=a("Vebz");const c=({link:e})=>t.createElement(n.Button,{href:e,content:"Download File",icon:"download",as:"a",target:"_blank",rel:"noopener noreferrer",className:"import-data__download-file"})}).call(this,a("q1tI"))},"9YpQ":function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return r}));var n=a("gObV"),c=a("c1Aa");class r extends n.a{constructor(...e){super(...e),this.startLoading=()=>{this.props.getTags()},this.renderMain=()=>t.createElement(c.a,null)}}}).call(this,a("q1tI"))},EJXe:function(t,e,a){"use strict";(function(t){a.d(e,"q",(function(){return u})),a.d(e,"o",(function(){return p})),a.d(e,"j",(function(){return d})),a.d(e,"t",(function(){return m})),a.d(e,"g",(function(){return f})),a.d(e,"n",(function(){return b})),a.d(e,"p",(function(){return h})),a.d(e,"r",(function(){return O})),a.d(e,"f",(function(){return g})),a.d(e,"a",(function(){return j})),a.d(e,"i",(function(){return E})),a.d(e,"l",(function(){return w})),a.d(e,"m",(function(){return _})),a.d(e,"k",(function(){return v})),a.d(e,"d",(function(){return y})),a.d(e,"s",(function(){return T})),a.d(e,"e",(function(){return x})),a.d(e,"h",(function(){return q})),a.d(e,"c",(function(){return C})),a.d(e,"b",(function(){return D}));var n=a("G4qV"),c=a("VR/D"),r=a("NHIt");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const i=t=>t.templateSettingsReducer,u=t=>i(t).start,p=t=>i(t).loading,d=t=>(t=>i(t).loadingTemplates)(t)&&(t=>i(t).loadingFolders)(t),m=t=>i(t).requestState.templatesRequest,f=t=>i(t).requestState.foldersRequest,b=t=>i(t).itemId||0,h=t=>i(t).search||"",O=t=>i(t).templates||c.a,g=t=>i(t).folders||c.a,j=Object(n.a)(g,t=>t.reduce((t,e)=>(e&&t.push(e),e.folders&&e.folders.length&&e.folders.forEach(a=>{t.push(l(l({},a),{},{parent:e}))}),t),[])),E=t=>O(t).length||p(t),w=Object(n.a)(O,e=>t.keyBy(e,"id")),_=(t,e)=>w(t)[e]||c.b,v=Object(n.a)(j,e=>t.keyBy(e,"id")),y=(t,e)=>v(t)[e]||c.b,T=t=>I(t).length,x=t=>g(t).length,q=t=>{const e=O(t),a=g(t);return N(e,a)},k=(t,e)=>t.filter(t=>t.folder_id===e),N=(t,e)=>e.map(e=>l(l({},e),{},{templates:k(t,e.id),folders:e.folders.map(e=>l(l({},e),{},{templates:k(t,e.id)}))})),I=Object(n.a)(O,t=>t.map(t=>l(l({},t),{},{app_ids:String(t.app_ids||"").split(",").map(Number)}))),S=Object(n.a)(I,b,(t,e)=>e?t.filter(t=>t.app_ids.find(t=>parseInt(t,10)===e)):t),C=Object(n.a)(S,h,(t,e)=>e.length?t.filter(t=>t.text.includes(e)||t.title.includes(e)):t),F=Object(n.a)(r.f,t=>t.map(t=>({key:t.itemId,value:t.appId,text:t.title,store:t.store}))),D=Object(n.a)(F,C,(e,a)=>{const n=t.chain(a).map(t=>t.app_ids).flatten().uniq().value();return[{key:"all",text:"All applications",value:""},...t.chain(e).filter(e=>t.includes(n,e.value)).value()]})}).call(this,a("LvDl"))},GTb2:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return h}));var n=a("ZB+l"),c=a("XI3S"),r=a("lT0A"),o=a("fuXp"),l=a("Mqaj"),s=a("0Xow"),i=a("Vebz"),u=a("lO17"),p=a("HxQu"),d=a("8H/j"),m=a("YYr1"),f=a("P3sk"),b=a("teGF");const h=t.memo(({type:e})=>{Object(n.b)(()=>{Object(c.a)("Import Data Pop Up Open",{type:e})});const a=Object(n.g)(),[h,O]=Object(n.q)(null),[g,j]=Object(n.q)(!1),[E,w]=Object(n.q)(!1),_=Object(n.i)(),v=l.a[e],y=Object(n.d)(()=>{E||g||!h||(j(!0),a(Object(s.a)(e,h)).catch(()=>w(!0)).finally(()=>j(!1)))},[a,E,h,g,e]),T=Object(n.d)(t=>{O(t),w(!1)},[]),x=Object(n.d)(()=>{O(null),w(!1)},[]);return t.createElement(o.a,{className:"w-500 import-data",onClose:_,open:!0,closeIcon:r.c},t.createElement(o.a.Header,null,v.title),t.createElement(o.a.Content,{className:"ui form"},t.createElement("div",{className:"import-data__content"},t.createElement("div",{className:"import-data__block"},t.createElement(u.a,{step:1}),t.createElement(p.a,{text:v.step1Text}),t.createElement(d.a,{link:v.exampleFileLink})),t.createElement("div",{className:"import-data__block"},t.createElement(u.a,{step:2}),h?t.createElement(f.a,{fileName:h.name,onRemove:x}):t.createElement(m.a,{onUploadFile:T})),E?t.createElement(b.a,null):null)),t.createElement(o.a.Actions,null,t.createElement("div",{className:"import-data__actions"},t.createElement(i.Button,{type:"primary",onClick:y,content:v.buttonText,loading:g}))))})}).call(this,a("q1tI"))},HxQu:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return n}));const n=({text:e})=>t.createElement("div",{className:"import-data__text"},e)}).call(this,a("q1tI"))},Lawg:function(t,e,a){"use strict";a.d(e,"b",(function(){return b})),a.d(e,"a",(function(){return h})),a.d(e,"d",(function(){return O})),a.d(e,"c",(function(){return g})),a.d(e,"g",(function(){return j})),a.d(e,"h",(function(){return E})),a.d(e,"e",(function(){return w})),a.d(e,"f",(function(){return v}));var n=a("aWKK"),c=a("l7B3"),r=a("4WxE"),o=a("NRsq"),l=a("wZ2d"),s=a("EJXe");const i=Object(n.a)(o.i,t=>({request:t})),u=Object(n.a)(o.j,t=>({templates:t})),p=Object(n.a)(o.h),d=Object(n.a)(o.f,t=>({request:t})),m=Object(n.a)(o.g,t=>({folders:t})),f=Object(n.a)(o.e),b=(Object(n.a)(o.k),Object(n.a)(o.b)),h=Object(n.a)(o.a),O=Object(n.a)(o.d),g=Object(n.a)(o.c),j=Object(n.a)(o.l,t=>({itemId:t})),E=Object(n.a)(o.m,t=>({search:t})),w=()=>async(t,e)=>{try{t(_()),t(y())}catch(a){Object(r.a)(a,{state:e()})}},_=()=>async(t,e)=>{try{const a=e(),n=Object(s.t)(a);n&&n.abort();const r=Object(l.q)(a),o=new c.a;t(i(o));const p="/apps/".concat(r,"/templates/api/template"),{data:d,error:m}=await o.get(p);if(m)throw m;t(u(d))}catch(a){t(p()),Object(r.a)(a,{state:e()})}},v=(t,e)=>async(a,n)=>{try{const r=n(),o=Object(l.q)(r),{error:s}=await(new c.a).delete("/apps/".concat(o,"/templates/api/").concat(e,"/").concat(t));if(s)throw s;a(w())}catch(o){Object(r.a)(o,{state:n()})}},y=()=>async(t,e)=>{try{const a=e(),n=Object(s.g)(a);n&&n.abort();const r=Object(l.q)(a),o=new c.a;t(d(o));const i="/apps/".concat(r,"/templates/api/folder"),{data:u,error:p}=await o.get(i);if(p)throw p;t(m(u))}catch(a){t(f()),Object(r.a)(a,{state:e()})}}},Mqaj:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));const n="Upload the file with your data in the system.",c={tags:{title:"Import Tags",buttonText:"Import Tags",step1Text:"Download the Tag file and replace sample data with your data.",step2Text:n,exampleFileLink:"/assets/import/AppFollow Tags Import.xlsx",urlAfterCollection:"/import/tags"},templates:{title:"Import Templates",buttonText:"Import Templates",step1Text:"Download the Template file and replace sample data with your data.",step2Text:n,exampleFileLink:"/assets/import/AppFollow Templates Import.xlsx",urlAfterCollection:"/import/templates"}}},N3ZE:function(t,e,a){"use strict";(function(t,n){a.d(e,"a",(function(){return d}));var c=a("8n0C"),r=a("umxb"),o=a("QetY"),l=a("D1pA"),s=a("MqQV"),i=a("rLZY"),u=a("2ZBa"),p=a("3AHW");class d extends t.Component{constructor(...t){super(...t),this.handleChangeSearchText=t=>this.props.changeSearchTextTags(t.target.value),this.handleClickReset=()=>this.props.changeSearchTextTags("")}render(){const{searchText:e,countTags:a}=this.props;return t.createElement(t.Fragment,null,t.createElement(u.a.Container,null,t.createElement(u.a.TitleRow,null,t.createElement(p.a,{type:"tags",text:"Import Tags"}))),t.createElement("div",{className:"tags tags_tab_settings ui form"},a>=i.f?t.createElement("div",{className:n("tags__search",{"tags__search--active":e.length})},t.createElement(r.a,{icon:"search",placeholder:"Search by name, category",fluid:!0,onChange:this.handleChangeSearchText,value:e,autoFocus:!0}),e.length?t.createElement(o.a,{icon:!0,className:"tags__search-reset",onClick:this.handleClickReset},t.createElement(l.a,{name:"repeat",color:"blue"})):null):null,t.createElement(c.a,null),a?t.createElement(s.a,{content:"Total tags: ",detail:a.toLocaleString("ru"),className:"tags__count"}):null))}}}).call(this,a("q1tI"),a("TSYQ"))},P3sk:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return n}));const n=({fileName:e,onRemove:a})=>t.createElement("div",{className:"import-data__file"},t.createElement("i",{className:"icon file import-data__file-icon"}),t.createElement("span",{className:"import-data__file-text"},e),t.createElement("i",{className:"icon remove import-data__file-remove",onClick:a}))}).call(this,a("q1tI"))},YYr1:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return r}));var n=a("Vebz"),c=a("ZB+l");const r=({onUploadFile:e})=>{const a=Object(c.m)(),r=Object(c.d)(t=>{t.currentTarget.files&&t.currentTarget.files[0]&&e(t.currentTarget.files[0])},[e]),o=Object(c.d)(()=>a.current.click(),[a]);return t.createElement("div",{className:"import-data__upload"},t.createElement("input",{type:"file",className:"hide",ref:a,onChange:r}),t.createElement(n.Button,{onClick:o,content:"Upload file",icon:"attach",className:"import-data__upload-btn"}))}}).call(this,a("q1tI"))},c1Aa:function(t,e,a){"use strict";var n=a("/MKj"),c=a("N3ZE"),r=a("uQn1"),o=a("uZSw");e.a=Object(n.b)(t=>({searchText:Object(o.m)(t),countTags:Object(o.d)(t)}),{changeSearchTextTags:r.b})(c.a)},ktRc:function(t,e,a){"use strict";a.r(e);var n=a("/MKj"),c=a("9YpQ"),r=a("uZSw"),o=a("uQn1");e.default=Object(n.b)(t=>({start:Object(r.t)(t,"loading"),loading:Object(r.t)(t,"loading")}),{getTags:o.e})(c.a)},lO17:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return n}));const n=({step:e})=>t.createElement("div",{className:"import-data__step"},"Step ",e)}).call(this,a("q1tI"))},teGF:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return c}));var n=a("HL8g");const c=()=>t.createElement(n.a,{type:"error"},"Required file format: .csv, .xls, .xlsx. Maximum file size: 10 mb.")}).call(this,a("q1tI"))}}]);